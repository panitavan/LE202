# __อธิบายโปรแกรม ใน 6 การทดลอง__
## **01_Serial-Monitor**
> โปรแกรมนี้มี 2 ฟังก์ชัน ส่วนแรกที่คือส่วนของ set up จะรันเพียงครั้งเดียว ซึ่งจะเซตที่ Serial port ที่ความเร็ว 115200  และส่วนที่สองคือ loop จะรันบนลูปตลอดไป จะให้เพิ่มตัวแปร count เรื่อยๆ โดยที่ให้แสดงผลตัวแปร count ออกมา แล้วให้หน่วงเวลา 1 วินาที platform ที่เราใช้เป็นผลิตภัณฑ์ของบริษัท espressif8266 บอร์ดชื่อ esp01_1m ใช้วิธีเขียนเปรแกรมแบบ arduino พอร์ตที่ใช้ติดต่อกับ COM3 ขั้นต่อการทดลอง เราจะ uoload โปรแกรม 01_Serial-Monitor ไปยังไมโครคอนโทรลเลอร์ด้วยคำสั่ง pio run -t upload ในขณะที่รันให้กดปุ่มสีดำ(upload) และก็กดปุ่นสีแดง(set) เมื่อโปรแกรมโหลดเสร็จ เราจะใช้คำสั่ง pio device monitor เพื่อดูผลลัพธ์ที่มันแสดงผลออกมาจากคอมพิวเตอร์ จะเห็นได้ว่าตัวแปร count จะถูกเพิ่มทีละ 1 และจะถูกแสดงผลทุกๆ 1 วินาที ถ้ากดปุ่มสีแดงอีกครั้งโปรแกรมจะ reset จะเริ่มนับใหม่                   

## **02_Scan-Wifi**
โปรแกรมตัวอย่างนี้มีเพื่อที่จะรันโปรแกรมบนไมโครคอนโทรลเลอร์ที่ชื่อ ESP01 มีWiFiอยู่ในตัวเอง ให้นำไปเสียบกับ USB To Serial Port ก็เตรียมที่จะ upload โปรแกรมเข้าไป ตัวโปรแกรมมี 2 ฟังก์ชันเช่นเดิม คือส่วนของ set up ก็จะมีส่วนของเซต WiFi และส่วนของ loop จะมีการวน loop ตลอดไป โดยแสดงผลว่าเริ่มต้นค้นฟา WiFi พอได้แล้วก็จะแสดงผลว่ามี access point อะไรบ้าง ต่อจากนี้ให้ป้อนคำสั่ง pio run -t upload เพื่อ upload โปรแกรมเข้าสู่ไมโครคอนโทรลเลอร์ หลังจากนั้นกดปุ่ม upload และกดปุ่ม reset เมื่อดปรแกรม upload เสร็จสิ้น โปรแกรมก็จะเข้าไปทำงานในไมโครคอนโทรลเลอร์ จะเริ่มทำงานโดยการแสกนหา WiFi หลังจากนั้นจะใช้คำสั่ง pio device monitor เพื่อดูว่าแสกนเจอ WiFi อะไรบ้าง

## **03_Output-Port**
โปรแกรมนี้จะทดลองการเอาต์พุตสัญญาณออกภายนอก ไมโครคอนโทรลเลอร์ที่ชื่อ ESP01 มีสองพอร์ต ได้แก่ พอร์ตเลข 0 และพอร์ตเลข 1 เมื่อต้องการเขียนโปรแกรมไปยังไมโครคอนโทรลเลอร์ ให้นำ adapter มาต่อกับ USB To Serial Port เพื่อจะได้มีสายพอร์ต 0 และ พอร์ต 1 ออกมาเป็นสายยาวๆ โดยพอร์ต 0 คือสีขาว และพอร์ต 1 คือสีเหลือง เพื่อให้เอาต์พุตออกมาที่พอร์ต 0 โปรแกรมนี้จะส่งเอาพุตออกมาที่พอร์ต 0 ซึ่งเป็นส่วยของ set up และเพื่อให้พอร์ต 0 นี้สามารถมองเห็นได้ด้วยตา จะมีการนำหลอด LED เปล่งแสงมาต่อเพื่อให้แสงสว่างเมื่อมี 1 ออกมาที่พอร์ต หลังจากนั้นเราไมโครคอนโทรลเลอร์เข้าไป หลังจากนั้นโทรแกรมจะทำการวนลุปตลอดไปทุก 0.5 วินาที แล้วนับ count ขึ้นไปเรื่อยๆ ถ้าcount เป็นเลขคี่ให้ on แต่ถ้า count เป็นเลขคู่ให้ off หมายความว่าส่งค่า HIGH ไปที่พอร์ต 0 และส่งค่อ LOW ไปที่พอร์ต 1 ต่อมาใช้คำสั่ง pio run -t upload แล้วให้กดปุ่มสีดำ(upload) และก็กดปุ่นสีแดง(set) เพื่อ upload โปรแกรมไปยังไมโครคอนโทรลเลอร์ เมื่อโปรแกรมโหลดเสร็จ เราจะใช้คำสั่ง pio device monitor เพื่อดูผลลัพธ์จากการรัน จะเห็นได้ว่าทุกๆ 0.5 วินาที จะขึ้น ON และ OFF สลับกันไป และเมื่อดูที่ LED จะส่องแสงสว่างเฉพาะที่พอร์ต 0 ก็จะเปล่งแสงออกมาตอนที่เป็น ON

## **04_Input-Port**
โปรแกรมเป็นการทดลองนำสัญญาณอินพุตขสกภายนอกเข้ามาในไมโครคอนโทรลเลอร์ โปรแกรมมี 2 ฟังก์ชันเช่นเดิม คือส่วนของ setup เราจะเซตพอร์ต 0 เป็นอินพุต(สีขาว) และพอร์ต 2 เป็นเอาต์พุต(สีเหลือง) และในส่วนของ loop โปรแกรมก็จะวนลูป จะอ่านข้อมูลจากพอร์ต 0 และโปรแกรมก็จะแสดงผลว่าอ่านได้เท่าไหร่ หลังจากนั้นโปรแกรมจะเช็คว่า ถ้าเป็น 1 ให้ LOW ไปที่พอร์ต 2(ไฟดับ) / ถ้าเป็น 0 ให้ HIGH ไปที่พอร์ต 2(ไฟติด) ดังนั้นสัญญาณอินพุตจากพอร์ต 0 จะเป็นตัวควบคุมให้ไฟเปิดหรือปิด ต่อไปนี้เราจะใช้คำสั่ง pio run -t upload แล้วให้กดปุ่มสีดำ(upload) และก็กดปุ่นสีแดง(set) เพื่อ upload โปรแกรมไปยังไมโครคอนโทรลเลอร์ และใช้คำสั่ง pio device monitor เพื่อดูผลการรัน จะเห็นได้ค่าอ่านค่าได้เลข 1 ตลอด ให้นำสายไฟสีขาว(พอร์ต 0) มาจิ้มสายสีดำ จะได้เอาต์พุตที่อ่านค่าเป็น 0 และหลอด LED จะเปล่งแสงสว่าง นำขา sensor ไปต่อกับไฟเลี้ยง และนำขาอีกข้างไปต่อกับสายไฟสีดำ(สายดิน) ส่วนขาที่มีตัวต้านทานไปต่อกับพอร์ต 0 จะเห็นได้ว่าเมื่อ sensor โดนแสงสว่างจะอ่านค่าได้ 0 (ไฟติด) แต่ถ้า sensor ไม่โดนแสงจะอ่านค่าได้ 1 (ไฟดับ)

## **05_Wifi-Wed-Server**
โปรแกรมนี้เป็นสร้าง Wed-Server ผ่าน WiFi อย่างแรกต้องใส่ ssid กับ password ลงไป จากนั้นโปรแกรมมี 2 ฟังก์ชันเช่นเดิม คือส่วนของ setup และส่วนของ loop โดยส่วนใหญ่จะอยู่ที่ส่วนของ set up จะมีหน้าที่ connect กับ WiFi ที่เราเลือกไว้หลังจากนั้นให้ set up Wed-Server ถ้ามีการ connect มาก็จะแสดงผลว่า "Hello cnt"และตัว count จะนับขึ้นเรื่อยๆ ต่อมาเราจะ upload โปรแกรมไปยังไมโครคอนโทรลเลอร์โดยใช้คำสั่ง pio run -t upload และเสียบไมโครคอนโทรลเลอร์กับ USB To Serial Port  หลังจากนั้นให้กดปุ่มสีดำ(upload) และก็กดปุ่นสีแดง(set) เพื่อ upload โปรแกรมไปยังไมโครคอนโทรลเลอร์ 

## **06_Wifi-AP-Wed-Server**


